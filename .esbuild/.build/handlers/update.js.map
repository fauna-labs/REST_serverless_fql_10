{
  "version": 3,
  "sources": ["../../../node_modules/fauna/src/index.ts", "../../../node_modules/fauna/src/client-configuration.ts", "../../../node_modules/fauna/src/errors.ts", "../../../node_modules/fauna/src/http-client/fetch-client.ts", "../../../node_modules/fauna/src/http-client/node-http2-client.ts", "../../../node_modules/fauna/src/http-client/index.ts", "../../../node_modules/fauna/src/regex.ts", "../../../node_modules/fauna/src/values/date-time.ts", "../../../node_modules/fauna/src/values/doc.ts", "../../../node_modules/fauna/src/values/set.ts", "../../../node_modules/fauna/src/tagged-type.ts", "../../../node_modules/fauna/src/query-builder.ts", "../../../node_modules/fauna/src/util/package-version.ts", "../../../node_modules/fauna/src/util/environment.ts", "../../../node_modules/fauna/src/wire-protocol.ts", "../../../node_modules/fauna/src/client.ts", "../../../handlers/update.ts"],
  "sourcesContent": ["export { Client } from \"./client\";\nexport {\n  endpoints,\n  type ClientConfiguration,\n  type Endpoints,\n} from \"./client-configuration\";\nexport {\n  AbortError,\n  AuthenticationError,\n  AuthorizationError,\n  ClientError,\n  ClientClosedError,\n  ContendedTransactionError,\n  FaunaError,\n  InvalidRequestError,\n  NetworkError,\n  ProtocolError,\n  QueryCheckError,\n  QueryRuntimeError,\n  QueryTimeoutError,\n  ServiceError,\n  ServiceInternalError,\n  ServiceTimeoutError,\n  ThrottlingError,\n} from \"./errors\";\nexport { type Query, fql } from \"./query-builder\";\nexport { LONG_MAX, LONG_MIN, TaggedTypeFormat } from \"./tagged-type\";\nexport {\n  type QueryValueObject,\n  type QueryValue,\n  type QueryFailure,\n  type QueryInfo,\n  type QueryInterpolation,\n  type QueryOptions,\n  type QueryRequest,\n  type QueryStats,\n  type QuerySuccess,\n  type Span,\n  type ValueFragment,\n} from \"./wire-protocol\";\nexport {\n  DateStub,\n  Document,\n  DocumentReference,\n  type DocumentT,\n  EmbeddedSet,\n  Module,\n  NamedDocument,\n  NamedDocumentReference,\n  NullDocument,\n  Page,\n  SetIterator,\n  TimeStub,\n} from \"./values\";\nexport {\n  FetchClient,\n  getDefaultHTTPClient,\n  isHTTPResponse,\n  NodeHTTP2Client,\n  type HTTPClient,\n  type HTTPRequest,\n  type HTTPResponse,\n} from \"./http-client\";\n", "import type { ValueFormat } from \"./wire-protocol\";\n\n/**\n * Configuration for a client. The options provided are used as the\n * default options for each query.\n */\nexport interface ClientConfiguration {\n  /**\n   * Time in milliseconds beyond {@link ClientConfiguration.query_timeout_ms} at\n   * which the client will abort a request if it has not received a response.\n   * The default is 5000 ms, which should account for network latency for most\n   * clients. The value must be greater than zero. The closer to zero the value\n   * is, the more likely the client is to abort the request before the server\n   * can report a legitimate response or error.\n   */\n  client_timeout_buffer_ms?: number;\n\n  /**\n   * The {@link URL} of Fauna to call. See {@link endpoints} for some default options.\n   */\n  endpoint?: URL;\n\n  /**\n   * Determines the encoded format expected for the query `arguments` field, and\n   * the `data` field of a successful response.\n   * @remarks **Note, it is very unlikely you need to change this value from its\n   * default.**\n   * The default format is \"tagged\", which specifies that the driver transmits\n   * type information over the wire. Type information allows the driver and\n   * Fauna to distinguish between types such as int\" and \"long\" which do not\n   * have a standard way of distinguishing in JSON.\n   * Rare use cases can also deal with standard JSON by setting the value to\n   * \"simple\". Note that the types enocodable in standard JSON are a subset of\n   * the types encodable in the default \"tagged\" format.\n   * It is not recommended that users use the \"simple\" format as you will lose\n   * the typing of your data. e.g. a \"Date\" will no longer be recognized by the\n   * Fauna as a \"Date\", but will instead be treated as a string.\n   */\n  format?: ValueFormat;\n\n  /**\n   * Time in milliseconds the client will keep an HTTP2 session open after all\n   * requests are completed. The default is 5000 ms.\n   */\n  http2_session_idle_ms?: number;\n\n  /**\n   * The maximum number of HTTP2 streams to execute in parallel\n   * to Fauna per HTTP2 session.\n   * Only relevant to certain HTTP2 clients.\n   * @remarks\n   * Relevant to clients using the {@link NodeHTTP2Client} provided,\n   * or any custom HTTP2Clients you implement that support this feature.\n   */\n  http2_max_streams?: number;\n\n  /**\n   * When true will keep executing a request even if the page\n   * that fired the request is no longer executing. Only relevant\n   * to underlying clients using the {@link https://fetch.spec.whatwg.org/ | Fetch standard}.\n   * By default set to false.\n   * @remarks\n   * Relevant to clients using the {@link FetchClient} provided,\n   * or any custom HTTP Clients you implement using the Fetch standard.\n   */\n  fetch_keepalive?: boolean;\n\n  /**\n   * A secret for your Fauna DB, used to authorize your queries.\n   * @see https://docs.fauna.com/fauna/current/security/keys\n   */\n  secret?: string;\n\n  // Query options\n\n  /**\n   * The timeout of each query, in milliseconds. This controls the maximum amount of\n   * time Fauna will execute your query before marking it failed. The default is 5000 ms.\n   */\n  query_timeout_ms?: number;\n\n  /**\n   * If true, unconditionally run the query as strictly serialized.\n   * This affects read-only transactions. Transactions which write\n   * will always be strictly serialized.\n   */\n  linearized?: boolean;\n\n  /**\n   * Controls what Javascript type to deserialize {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/types#long | Fauna longs} to.\n   * Use 'number' to deserialize longs to number. Use 'bigint' to deserialize to bigint. Defaults to 'number'.\n   * Note, for extremely large maginitude numbers Javascript's number will lose precision; as Javascript's\n   * 'number' can only support +/- 2^53-1 whereas Fauna's long is 64 bit. If this is detected, a warning will\n   * be logged to the console and precision loss will occur.\n   * If your application uses extremely large magnitude numbers use 'bigint'.\n   */\n  long_type?: \"number\" | \"bigint\";\n\n  /**\n   * The max number of times to retry the query if contention is encountered.\n   */\n  max_contention_retries?: number;\n\n  /**\n   * Tags provided back via logging and telemetry.\n   */\n  query_tags?: { [key: string]: string };\n\n  /**\n   * A traceparent provided back via logging and telemetry.\n   * Must match format: https://www.w3.org/TR/trace-context/#traceparent-header\n   */\n  traceparent?: string;\n\n  /**\n   * Enable or disable typechecking of the query before evaluation. If no value\n   * is provided, the value of `typechecked` in the database configuration will\n   * be used.\n   */\n  typecheck?: boolean;\n}\n\n/**\n * An extensible interface for a set of Fauna endpoints.\n * @remarks Leverage the `[key: string]: URL;` field to extend to other endpoints.\n */\nexport interface Endpoints {\n  /** Fauna's default endpoint. */\n  default: URL;\n\n  /**\n   * An endpoint for interacting with local instance of Fauna (e.g. one running in a local docker container).\n   */\n  local: URL;\n\n  /**\n   * An alias for local.\n   */\n  localhost: URL;\n\n  /**\n   * Any other endpoint you want your client to support. For example, if you run all requests through a proxy\n   * configure it here. Most clients will not need to leverage this ability.\n   */\n  [key: string]: URL;\n}\n\n/**\n * A extensible set of endpoints for calling Fauna.\n * @remarks Most clients will will not need to extend this set.\n * @example\n * ## To Extend\n * ```typescript\n *   // add to the endpoints constant\n *   endpoints.myProxyEndpoint = new URL(\"https://my.proxy.url\");\n * ```\n */\nexport const endpoints: Endpoints = {\n  default: new URL(\"https://db.fauna.com\"),\n  local: new URL(\"http://localhost:8443\"),\n  localhost: new URL(\"http://localhost:8443\"),\n};\n", "import type {\n  ConstraintFailure,\n  QueryFailure,\n  QueryInfo,\n  QueryValue,\n} from \"./wire-protocol\";\n\n/**\n * A common error base class for all other errors.\n */\nexport abstract class FaunaError extends Error {\n  constructor(...args: any[]) {\n    super(...args);\n  }\n}\n\n/**\n * An error representing a query failure returned by Fauna.\n */\nexport class ServiceError extends FaunaError {\n  /**\n   * The HTTP Status Code of the error.\n   */\n  readonly httpStatus: number;\n  /**\n   * A code for the error. Codes indicate the cause of the error.\n   * It is safe to write programmatic logic against the code. They are\n   * part of the API contract.\n   */\n  readonly code: string;\n  /**\n   * Details about the query sent along with the response\n   */\n  readonly queryInfo?: QueryInfo;\n  /**\n   * A machine readable description of any constraint failures encountered by the query.\n   * Present only if this query encountered constraint failures.\n   */\n  readonly constraint_failures?: Array<ConstraintFailure>;\n\n  constructor(failure: QueryFailure, httpStatus: number) {\n    super(failure.error.message);\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ServiceError);\n    }\n\n    this.name = \"ServiceError\";\n    this.code = failure.error.code;\n    this.httpStatus = httpStatus;\n\n    const info: QueryInfo = {\n      txn_ts: failure.txn_ts,\n      summary: failure.summary,\n      query_tags: failure.query_tags,\n      stats: failure.stats,\n    };\n    this.queryInfo = info;\n\n    this.constraint_failures = failure.error.constraint_failures;\n  }\n}\n\n/**\n * An error response that is the result of the query failing during execution.\n * QueryRuntimeError's occur when a bug in your query causes an invalid execution\n * to be requested.\n * The 'code' field will vary based on the specific error cause.\n *\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/errors#runtime-errors}\n */\nexport class QueryRuntimeError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 400) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, QueryRuntimeError);\n    }\n    this.name = \"QueryRuntimeError\";\n    // TODO trace, txn_ts, and stats not yet returned for QueryRuntimeError\n    // flip to check for those rather than a specific code.\n  }\n}\n\n/**\n * An error due to a \"compile-time\" check of the query\n * failing.\n *\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/errors#runtime-errors}\n */\nexport class QueryCheckError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 400) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, QueryCheckError);\n    }\n    this.name = \"QueryCheckError\";\n  }\n}\n\n/**\n * An error due to an invalid request to Fauna. Either the request body was not\n * valid JSON or did not conform to the API specification\n *\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/errors#runtime-errors}\n */\nexport class InvalidRequestError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 400) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, InvalidRequestError);\n    }\n    this.name = \"InvalidRequestError\";\n  }\n}\n\n/**\n * An error due to calling the FQL `abort` function.\n *\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/errors#runtime-errors}\n */\nexport class AbortError extends ServiceError {\n  /**\n   * The user provided value passed to the originating `abort()` call.\n   * Present only when the query encountered an `abort()` call, which is denoted\n   * by the error code `\"abort\"`\n   */\n  readonly abort: QueryValue;\n\n  constructor(\n    failure: QueryFailure & { error: { abort: QueryValue } },\n    httpStatus: 400\n  ) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, QueryCheckError);\n    }\n    this.name = \"AbortError\";\n    this.abort = failure.error.abort;\n  }\n}\n\n/**\n * AuthenticationError indicates invalid credentials were\n * used.\n */\nexport class AuthenticationError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 401) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, AuthenticationError);\n    }\n    this.name = \"AuthenticationError\";\n  }\n}\n\n/**\n * AuthorizationError indicates the credentials used do not have\n * permission to perform the requested action.\n */\nexport class AuthorizationError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 403) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, AuthorizationError);\n    }\n    this.name = \"AuthorizationError\";\n  }\n}\n\n/**\n * An error due to a contended transaction.\n */\nexport class ContendedTransactionError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 409) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, InvalidRequestError);\n    }\n    this.name = \"ContendedTransactionError\";\n  }\n}\n\n/**\n * ThrottlingError indicates some capacity limit was exceeded\n * and thus the request could not be served.\n */\nexport class ThrottlingError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 429) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ThrottlingError);\n    }\n    this.name = \"ThrottlingError\";\n  }\n}\n\n/**\n * A failure due to the timeout being exceeded, but the timeout\n * was set lower than the query's expected processing time.\n * This response is distinguished from a ServiceTimeoutException\n * in that a QueryTimeoutError shows Fauna behaving in an expected\n * manner.\n */\nexport class QueryTimeoutError extends ServiceError {\n  /**\n   * Statistics regarding the query.\n   */\n  readonly stats?: { [key: string]: number };\n\n  constructor(failure: QueryFailure, httpStatus: 440) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, QueryTimeoutError);\n    }\n    this.name = \"QueryTimeoutError\";\n    this.stats = failure.stats;\n  }\n}\n\n/**\n * ServiceInternalError indicates Fauna failed unexpectedly.\n */\nexport class ServiceInternalError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 500) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ServiceInternalError);\n    }\n    this.name = \"ServiceInternalError\";\n  }\n}\n\n/**\n * ServiceTimeoutError indicates Fauna was not available to servce\n * the request before the timeout was reached.\n */\nexport class ServiceTimeoutError extends ServiceError {\n  constructor(failure: QueryFailure, httpStatus: 503) {\n    super(failure, httpStatus);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ServiceTimeoutError);\n    }\n    this.name = \"ServiceTimeoutError\";\n  }\n}\n\n/**\n * An error representing a failure internal to the client, itself.\n * This indicates Fauna was never called - the client failed internally\n * prior to sending the request.\n */\nexport class ClientError extends FaunaError {\n  constructor(message: string, options?: { cause: any }) {\n    super(message, options);\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ClientError);\n    }\n    this.name = \"ClientError\";\n  }\n}\n\n/**\n * An error thrown if you try to call the client after it has been closed.\n */\nexport class ClientClosedError extends FaunaError {\n  constructor(message: string, options?: { cause: any }) {\n    super(message, options);\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ClientClosedError);\n    }\n    this.name = \"ClientClosedError\";\n  }\n}\n\n/**\n * An error representing a failure due to the network.\n * This indicates Fauna was never reached.\n */\nexport class NetworkError extends FaunaError {\n  constructor(message: string, options: { cause: any }) {\n    super(message, options);\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, NetworkError);\n    }\n    this.name = \"NetworkError\";\n  }\n}\n\n/**\n * An error representing a HTTP failure - but one not directly\n * emitted by Fauna.\n */\nexport class ProtocolError extends FaunaError {\n  /**\n   * The HTTP Status Code of the error.\n   */\n  readonly httpStatus: number;\n\n  constructor(error: { message: string; httpStatus: number }) {\n    super(error.message);\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ProtocolError);\n    }\n\n    this.name = \"ProtocolError\";\n    this.httpStatus = error.httpStatus;\n  }\n}\n", "/** following reference needed to include types for experimental fetch API in Node */\n/// <reference lib=\"dom\" />\n\nimport { NetworkError } from \"../errors\";\nimport {\n  HTTPClient,\n  HTTPClientOptions,\n  HTTPRequest,\n  HTTPResponse,\n} from \"./http-client\";\n\n/**\n * An implementation for {@link HTTPClient} that uses the native fetch API\n */\nexport class FetchClient implements HTTPClient {\n  #url: string;\n  #keepalive: boolean;\n\n  constructor({ url, fetch_keepalive }: HTTPClientOptions) {\n    this.#url = new URL(\"/query/1\", url).toString();\n    this.#keepalive = fetch_keepalive;\n  }\n\n  /** {@inheritDoc HTTPClient.request} */\n  async request({\n    data,\n    headers: requestHeaders,\n    method,\n    client_timeout_ms,\n  }: HTTPRequest): Promise<HTTPResponse> {\n    const signal =\n      AbortSignal.timeout === undefined\n        ? (() => {\n            const controller = new AbortController();\n            const signal = controller.signal;\n            setTimeout(() => controller.abort(), client_timeout_ms);\n            return signal;\n          })()\n        : AbortSignal.timeout(client_timeout_ms);\n\n    const response = await fetch(this.#url, {\n      method,\n      headers: { ...requestHeaders, \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data),\n      signal,\n      keepalive: this.#keepalive,\n    }).catch((error) => {\n      throw new NetworkError(\"The network connection encountered a problem.\", {\n        cause: error,\n      });\n    });\n\n    const status = response.status;\n\n    const responseHeaders: Record<string, string> = {};\n    response.headers.forEach((value, key) => (responseHeaders[key] = value));\n\n    const body = await response.text();\n\n    return {\n      status,\n      body,\n      headers: responseHeaders,\n    };\n  }\n\n  /** {@inheritDoc HTTPClient.close} */\n  close() {\n    // no actions at this time\n  }\n}\n", "let http2: any;\ntry {\n  http2 = require(\"node:http2\");\n} catch (_) {\n  http2 = undefined;\n}\nimport {\n  HTTPClient,\n  HTTPClientOptions,\n  HTTPRequest,\n  HTTPResponse,\n} from \"./http-client\";\nimport { NetworkError } from \"../errors\";\n\n// alias http2 types\ntype ClientHttp2Session = any;\ntype ClientHttp2Stream = any;\ntype IncomingHttpHeaders = any;\ntype IncomingHttpStatusHeader = any;\ntype OutgoingHttpHeaders = any;\n\n/**\n * An implementation for {@link HTTPClient} that uses the node http package\n */\nexport class NodeHTTP2Client implements HTTPClient {\n  static #clients: Map<string, NodeHTTP2Client> = new Map();\n\n  #http2_session_idle_ms: number;\n  #http2_max_streams: number;\n  #url: string;\n  #numberOfUsers = 0;\n  #session: ClientHttp2Session | null;\n\n  private constructor({\n    http2_session_idle_ms,\n    url,\n    http2_max_streams,\n  }: HTTPClientOptions) {\n    if (http2 === undefined) {\n      throw new Error(\"Your platform does not support Node's http2 library\");\n    }\n\n    this.#http2_session_idle_ms = http2_session_idle_ms;\n    this.#http2_max_streams = http2_max_streams;\n    this.#url = url;\n    this.#session = null;\n  }\n\n  /**\n   * Gets a {@link NodeHTTP2Client} matching the {@link HTTTPClientOptions}\n   * @param httpClientOptions - the {@link HTTTPClientOptions}\n   * @returns a {@link NodeHTTP2Client} matching the {@link HTTTPClientOptions}\n   */\n  static getClient(httpClientOptions: HTTPClientOptions): NodeHTTP2Client {\n    const clientKey = NodeHTTP2Client.#getClientKey(httpClientOptions);\n    if (!NodeHTTP2Client.#clients.has(clientKey)) {\n      NodeHTTP2Client.#clients.set(\n        clientKey,\n        new NodeHTTP2Client(httpClientOptions)\n      );\n    }\n    // we know that we have a client here\n    const client = NodeHTTP2Client.#clients.get(clientKey) as NodeHTTP2Client;\n    client.#numberOfUsers++;\n    return client;\n  }\n\n  static #getClientKey({ http2_session_idle_ms, url }: HTTPClientOptions) {\n    return `${url}|${http2_session_idle_ms}`;\n  }\n\n  /** {@inheritDoc HTTPClient.request} */\n  async request(req: HTTPRequest): Promise<HTTPResponse> {\n    let retryCount = 0;\n    let memoizedError: any;\n    do {\n      try {\n        return await this.#doRequest(req);\n      } catch (error: any) {\n        // see https://github.com/nodejs/node/pull/42190/files\n        // and https://github.com/nodejs/help/issues/2105\n        //\n        // TLDR; In Node, there is a race condition between handling\n        // GOAWAY and submitting requests - that can cause\n        // clients that safely handle go away to submit\n        // requests after a GOAWAY was received anyway.\n        //\n        // technical explanation: node HTTP2 request gets put\n        // on event queue before it is actually executed. In the iterim,\n        // a GOAWAY can come and cause the request to fail\n        // with a GOAWAY.\n        if (error?.code !== \"ERR_HTTP2_GOAWAY_SESSION\") {\n          // TODO: be more discernable about error types\n          throw new NetworkError(\n            \"The network connection encountered a problem.\",\n            {\n              cause: error,\n            }\n          );\n        }\n        memoizedError = error;\n        retryCount++;\n      }\n    } while (retryCount < 3);\n    throw new NetworkError(\"The network connection encountered a problem.\", {\n      cause: memoizedError,\n    });\n  }\n\n  /** {@inheritDoc HTTPClient.close} */\n  close() {\n    // defend against redundant close calls\n    if (this.isClosed()) {\n      return;\n    }\n    this.#numberOfUsers--;\n    if (this.#numberOfUsers === 0 && this.#session && !this.#session.closed) {\n      this.#session.close();\n    }\n  }\n\n  /**\n   * @returns true if this client has been closed, false otherwise.\n   */\n  isClosed(): boolean {\n    return this.#numberOfUsers === 0;\n  }\n\n  #closeForAll() {\n    this.#numberOfUsers = 0;\n    if (this.#session && !this.#session.closed) {\n      this.#session.close();\n    }\n  }\n\n  #connect() {\n    // create the session if it does not exist or is closed\n    if (!this.#session || this.#session.closed || this.#session.destroyed) {\n      const new_session: ClientHttp2Session = http2\n        .connect(this.#url, {\n          peerMaxConcurrentStreams: this.#http2_max_streams,\n        })\n        .once(\"error\", () => this.#closeForAll())\n        .once(\"goaway\", () => this.#closeForAll());\n\n      new_session.setTimeout(this.#http2_session_idle_ms, () => {\n        this.#closeForAll();\n      });\n\n      this.#session = new_session;\n    }\n    return this.#session;\n  }\n\n  #doRequest({\n    client_timeout_ms,\n    data: requestData,\n    headers: requestHeaders,\n    method,\n  }: HTTPRequest): Promise<HTTPResponse> {\n    return new Promise<HTTPResponse>((resolvePromise, rejectPromise) => {\n      let req: ClientHttp2Stream;\n      const onResponse = (\n        http2ResponseHeaders: IncomingHttpHeaders & IncomingHttpStatusHeader\n      ) => {\n        const status = Number(\n          http2ResponseHeaders[http2.constants.HTTP2_HEADER_STATUS]\n        );\n        let responseData = \"\";\n\n        // append response data to the data string every time we receive new\n        // data chunks in the response\n        req.on(\"data\", (chunk: any) => {\n          responseData += chunk;\n        });\n\n        // Once the response is finished, resolve the promise\n        req.on(\"end\", () => {\n          resolvePromise({\n            status,\n            body: responseData,\n            headers: http2ResponseHeaders,\n          });\n        });\n      };\n\n      try {\n        const httpRequestHeaders: OutgoingHttpHeaders = {\n          ...requestHeaders,\n          [http2.constants.HTTP2_HEADER_PATH]: \"/query/1\",\n          [http2.constants.HTTP2_HEADER_METHOD]: method,\n        };\n\n        const session = this.#connect();\n        req = session\n          .request(httpRequestHeaders)\n          .setEncoding(\"utf8\")\n          .on(\"error\", (error: any) => {\n            rejectPromise(error);\n          })\n          .on(\"response\", onResponse);\n\n        req.write(JSON.stringify(requestData), \"utf8\");\n\n        // req.setTimeout must be called before req.end()\n        req.setTimeout(client_timeout_ms, () => {\n          req.destroy(new Error(`Client timeout`));\n        });\n\n        req.end();\n      } catch (error) {\n        rejectPromise(error);\n      }\n    });\n  }\n}\n", "import { FetchClient } from \"./fetch-client\";\nimport { NodeHTTP2Client } from \"./node-http2-client\";\nimport {\n  HTTPClient,\n  HTTPClientOptions,\n  HTTPRequest,\n  HTTPResponse,\n} from \"./http-client\";\n\nexport const getDefaultHTTPClient = (options: HTTPClientOptions): HTTPClient =>\n  nodeHttp2IsSupported()\n    ? NodeHTTP2Client.getClient(options)\n    : new FetchClient(options);\n\nexport const isHTTPResponse = (res: any): res is HTTPResponse =>\n  res instanceof Object && \"body\" in res && \"headers\" in res && \"status\" in res;\n\nconst nodeHttp2IsSupported = () => {\n  if (\n    typeof process !== \"undefined\" &&\n    process &&\n    process.release?.name === \"node\"\n  ) {\n    try {\n      require(\"node:http2\");\n      return true;\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n};\n\nexport { FetchClient, NodeHTTP2Client, HTTPClient, HTTPRequest, HTTPResponse };\n", "// Date and Time expressions\n\nconst yearpart = /(?:\\d{4}|[\\u2212-]\\d{4,}|\\+\\d{5,})/;\nconst monthpart = /(?:0[1-9]|1[0-2])/;\nconst daypart = /(?:0[1-9]|[12]\\d|3[01])/;\nconst hourpart = /(?:[01][0-9]|2[0-3])/;\nconst minsecpart = /(?:[0-5][0-9])/;\nconst decimalpart = /(?:\\.\\d+)/;\n\nconst datesplit = new RegExp(\n  `(${yearpart.source}-(${monthpart.source})-(${daypart.source}))`\n);\n\nconst timesplit = new RegExp(\n  `(${hourpart.source}:${minsecpart.source}:${minsecpart.source}${decimalpart.source}?)`\n);\n\nconst zonesplit = new RegExp(\n  `([zZ]|[+\\u2212-]${hourpart.source}(?::?${minsecpart.source}|:${minsecpart.source}:${minsecpart.source}))`\n);\n\n/**\n * Matches the subset of ISO8601 dates that Fauna can accept. Cannot include any\n * time part\n */\nexport const plaindate = new RegExp(`^${datesplit.source}$`);\n\n/**\n * Matches a valid ISO8601 date and can have anything trailing after.\n */\nexport const startsWithPlaindate = new RegExp(`^${datesplit.source}`);\n\n/**\n * Matches the subset of ISO8601 times that Fauna can accept.\n */\nexport const datetime = new RegExp(\n  `^${datesplit.source}T${timesplit.source}${zonesplit.source}$`\n);\n", "import { ClientError } from \"../errors\";\nimport * as PARSE from \"../regex\";\n\n/**\n * A wrapper around the Fauna `Time` type. It, represents a fixed point in time\n * without regard to calendar or location, e.g. July 20, 1969, at 20:17 UTC.\n * Convert to and from Javascript Date's with the {@link TimeStub.fromDate} and\n * {@link TimeStub.toDate} methods.\n * See remarks for possible precision loss when doing this. If precision loss is\n * a concern consider using a 3rd party datetime library such as luxon.\n *\n * @remarks The Javascript `Date` type most closely resembles a Fauna `Time`,\n * not a Fauna `Date`. However, Fauna stores `Time` values with nanosecond\n * precision, while Javascript `Date` values only have millisecond precision.\n * This TimeStub class preserves precision by storing the original string value\n * and should be used whenever possible to pass `Time` values back to Fauna.\n * Converting to a Javascript date before sending to Fauna could result in loss\n * of precision.\n *\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/builtin_functions/time/time}\n */\nexport class TimeStub {\n  readonly isoString: string;\n\n  /**\n   * @remarks constructor is private to enforce using factory functions\n   */\n  private constructor(isoString: string) {\n    this.isoString = isoString;\n  }\n\n  /**\n   * Creates a new {@link TimeStub} from an ISO date string\n   * @param isoString - An ISO date string.\n   * @returns A new {@link TimeStub}\n   * @throws TypeError if a string is not provided, or RangeError if item\n   * is not a valid date\n   */\n  static from(isoString: string): TimeStub {\n    if (typeof isoString !== \"string\") {\n      throw new TypeError(\n        `Expected string but received ${typeof isoString}: ${isoString}`\n      );\n    }\n    const matches = PARSE.datetime.exec(isoString);\n    if (matches === null) {\n      throw new RangeError(\n        `(regex) Expected an ISO date string but received '${isoString}'`\n      );\n    }\n    // There are some dates that match the regex but are invalid, such as Feb 31.\n    // Javascript does not parse all years that are valid in fauna, so let\n    // Fauna be the final check.\n\n    return new TimeStub(isoString);\n  }\n\n  /**\n   * Creates a new {@link TimeStub} from a Javascript `Date`\n   * @param date - A Javascript `Date`\n   * @returns A new {@link TimeStub}\n   */\n  static fromDate(date: Date): TimeStub {\n    return new TimeStub(date.toISOString());\n  }\n\n  /**\n   * Get a copy of the `TimeStub` converted to a Javascript `Date`. Does not\n   * mutate the existing `TimeStub` value.\n   * @returns A `Date`\n   */\n  toDate(): Date {\n    const date = new Date(this.isoString);\n    if (date.toString() === \"Invalid Date\") {\n      throw new RangeError(\n        \"Fauna Date could not be converted to Javascript Date\"\n      );\n    }\n    return date;\n  }\n\n  /**\n   * Override default string conversion\n   * @returns the string representation of a `TimeStub`\n   */\n  toString(): string {\n    return `TimeStub(\"${this.isoString}\")`;\n  }\n}\n\n/**\n * A wrapper aroud the Fauna `Date` type. It represents a calendar date that is\n * not associated with a particular time or time zone, e.g. August 24th, 2006.\n * Convert to and from Javascript Date's with the {@link DateStub.fromDate} and\n * {@link DateStub.toDate} methods. Javascript Dates are rendered in UTC time\n * before the date part is used.\n * See remarks for possible precision loss when doing this. If precision loss is\n * a concern consider using a 3rd party datetime library such as luxon.\n *\n * @remarks The Javascript `Date` type always has a time associated with it, but\n * Fauna's `Date` type does not. When converting from a Fauna `Date` to a\n * Javascript `Date`, we set time to 00:00:00 UTC. When converting a Javascript\n * `Date` or time string to Fauna `Date`, we convert to UTC first. Care should\n * be taken to specify the desired date, since Javascript `Date`s use local\n * timezone info by default.\n *\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/builtin_functions/date/date}\n */\nexport class DateStub {\n  readonly dateString: string;\n\n  /**\n   * @remarks constructor is private to enforce using factory functions\n   */\n  private constructor(dateString: string) {\n    this.dateString = dateString;\n  }\n\n  /**\n   * Creates a new {@link DateStub} from a date string\n   * @param dateString - A plain date string. The time is converted to UTC\n   * before saving the date.\n   * @returns A new {@link DateStub}\n   * @throws TypeError if a string is not provided, or RangeError if dateString\n   * is not a valid date\n   */\n  static from(dateString: string): DateStub {\n    if (typeof dateString !== \"string\") {\n      throw new TypeError(\n        `Expected string but received ${typeof dateString}: ${dateString}`\n      );\n    }\n    const matches = PARSE.plaindate.exec(dateString);\n    if (matches === null) {\n      throw new RangeError(\n        `Expected a plain date string but received '${dateString}'`\n      );\n    }\n    // There are some dates that match the regex but are invalid, such as Feb 31.\n    // Javascript does not parse all years that are valid in fauna, so let\n    // Fauna be the final check.\n\n    return new DateStub(matches[0]);\n  }\n\n  /**\n   * Creates a new {@link DateStub} from a Javascript `Date`\n   * @param date - A Javascript `Date`. The time is converted to UTC before\n   * saving the date.\n   * @returns A new {@link DateStub}\n   */\n  static fromDate(date: Date): DateStub {\n    const dateString = date.toISOString();\n    const matches = PARSE.startsWithPlaindate.exec(dateString);\n    if (matches === null) {\n      // Our regex should match any possible date that comes out of\n      // `Date.toISOString()`, so we will only get here if the regex is\n      // incorrect. This is a ClientError since it is our fault.\n      throw new ClientError(`Failed to parse date '${date}'`);\n    }\n    return new DateStub(matches[0]);\n  }\n\n  /**\n   * Get a copy of the `TimeStub` converted to a Javascript `Date`. Does not\n   * mutate the existing `TimeStub` value.\n   * @returns A `Date`\n   */\n  toDate(): Date {\n    const date = new Date(this.dateString + \"T00:00:00Z\");\n    if (date.toString() === \"Invalid Date\") {\n      throw new RangeError(\n        \"Fauna Date could not be converted to Javascript Date\"\n      );\n    }\n    return date;\n  }\n\n  /**\n   * Override default string conversion\n   * @returns the string representation of a `DateStub`\n   */\n  toString(): string {\n    return `DateStub(\"${this.dateString}\")`;\n  }\n}\n", "import { QueryValueObject } from \"../wire-protocol\";\nimport { TimeStub } from \"./date-time\";\n\n/**\n * A reference to a Document with an ID. The Document may or may not exist.\n * References to Keys, Tokens, and Documents in user-defined Collections are\n * modeled with a {@link DocumentReference}.\n *\n * The example below retrieves a document reference from a\n * hypothetical \"Users\" collection.\n *\n * @example\n * ```javascript\n *  const response = await client.query(fql`\n *    Users.byId(\"101\")\n *  `);\n *  const userDocumentReference = response.data;\n *\n *  const id = userDocumentReference.id;\n *  id === \"101\"; // returns true\n * ```\n */\nexport class DocumentReference {\n  readonly coll: Module;\n  readonly id: string;\n\n  constructor({ coll, id }: { coll: Module | string; id: string }) {\n    this.id = id;\n\n    if (typeof coll === \"string\") {\n      this.coll = new Module(coll);\n    } else {\n      this.coll = coll;\n    }\n  }\n}\n\n/**\n * A materialized Document with an ID. Keys, Tokens and Documents in\n * user-defined Collections are modeled with a {@link Document}. All top level\n * Document fields are added to a {@link Document} instance, but types cannot be\n * provided. Cast the instance to a {@link DocumentT} to have typesafe access to\n * all top level fields.\n *\n * The example below retrieves a document from a\n * hypothetical \"Users\" collection.\n *\n * @example\n * ```javascript\n *  const response = await client.query(fql`\n *    Users.byId(\"101\")\n *  `);\n *  const userDocument = response.data;\n *\n *  const color = userDocument.color;\n * ```\n *\n * @remarks The {@link Document} class cannot be generic because classes cannot\n * extend generic type arguments.\n */\nexport class Document extends DocumentReference {\n  readonly ts: TimeStub;\n\n  constructor(obj: {\n    coll: Module | string;\n    id: string;\n    ts: TimeStub;\n    [key: string]: any;\n  }) {\n    const { coll, id, ts, ...rest } = obj;\n    super({ coll, id });\n    this.ts = ts;\n    Object.assign(this, rest);\n  }\n\n  toObject(): { coll: Module; id: string; ts: TimeStub } {\n    return { ...this } as { coll: Module; id: string; ts: TimeStub };\n  }\n}\n\n/**\n * A reference to a Document with a name. The Document may or may not exist.\n * References to specific AccessProviders, Collections, Databases, Functions, etc. are\n * modeled with a {@link NamedDocumentReference}.\n *\n * The example below retrieves a NamedDocumentReference for a hypothetical\n * \"Users\" collection.\n *\n * @example\n * ```javascript\n *  const response = await client.query(fql`\n *    Users.definition\n *  `);\n *  const namedDocumentReference = response.data;\n *\n *  const collectionName = namedDocumentReference.name;\n *  collectionName === \"Users\"; // returns true\n * ```\n */\nexport class NamedDocumentReference {\n  readonly coll: Module;\n  readonly name: string;\n\n  constructor({ coll, name }: { coll: Module | string; name: string }) {\n    this.name = name;\n\n    if (typeof coll === \"string\") {\n      this.coll = new Module(coll);\n    } else {\n      this.coll = coll;\n    }\n  }\n}\n\n/**\n * A materialized Document with a name. Specific AccessProviders, Collections, Databases,\n * Functions, etc. that include user defined data are modeled with a {@link NamedDocument}.\n *\n * The example below retrieves a NamedDocument for a hypothetical\n * \"Users\" collection.\n *\n * @example\n * ```javascript\n *  const response = await client.query(fql`\n *    Users.definition\n *  `);\n *  const userCollectionNamedDocument = response.data;\n *\n *  const indexes = userCollectionNamedDocument.indexes;\n * ```\n *\n * @example\n * All of the named Documents can have optional, user-defined data. The generic\n * class lets you define the shape of that data in a typesafe way\n * ```typescript\n *  type CollectionMetadata = {\n *    metadata: string\n *  }\n *\n *  const response = await client.query<NamedDocument<CollectionMetadata>>(fql`\n *    Users.definition\n *  `);\n *  const userCollection = response.data;\n *\n *  const metadata = userCollection.data.metadata;\n * ```\n */\nexport class NamedDocument<\n  T extends QueryValueObject = Record<string, never>\n> extends NamedDocumentReference {\n  readonly ts: TimeStub;\n  readonly data: T;\n\n  constructor(obj: {\n    coll: Module | string;\n    name: string;\n    ts: TimeStub;\n    data?: T;\n  }) {\n    const { coll, name, ts, data, ...rest } = obj;\n    super({ coll, name });\n    this.ts = ts;\n    this.data = data || ({} as T);\n    Object.assign(this, rest);\n  }\n\n  toObject(): { coll: Module; name: string; ts: TimeStub; data: T } {\n    return { ...this } as { coll: Module; name: string; ts: TimeStub; data: T };\n  }\n}\n\n/**\n * A Fauna module, such as a Collection, Database, Function, Role, etc.\n * Every module is usable directly in your FQL code.\n *\n * The example below shows FQL code that gets all documents for a hypothetical\n * 'Users' collection by creating a Module for user and then calling .all().\n *\n * You can also create modules for databases, functions, roles and other\n * entities in your database.\n *\n * @example\n * ```javascript\n *  const response = await client.query(fql`\n *    ${new Module(\"Users\")}.all()\n *  `);\n *  const allUserDocuments = response.data;\n * ```\n */\nexport class Module {\n  readonly name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n}\n\n/**\n * A reference to a Document or Named Document that could not be read. The\n * Document may or may not exist in future queries. The cause field specifies\n * the reason the document could not be read, typically because the Document\n * does not exist or due to insufficient privileges.\n *\n * Some read operations, such as the `<Collection>.byId` method may return\n * either a Document or a NullDocument. This example shows how to handle such a\n * result with the driver\n *\n * @example\n * ```typescript\n *  const response = await client.query<Document | NullDocument>(fql`\n *    Users.byId(\"101\")\n *  `);\n *  const maybeUserDocument = response.data;\n *\n *  if (maybeUserDocument instanceof NullDocument) {\n *    // handle NullDocument case\n *    const cause = maybeUserDocument.cause\n *  } else {\n *    // handle Document case\n *    const color = maybeUserDocument.color;\n *  }\n * ```\n */\nexport class NullDocument {\n  readonly ref: DocumentReference | NamedDocumentReference;\n  readonly cause: string;\n\n  constructor(ref: DocumentReference | NamedDocumentReference, cause: string) {\n    this.ref = ref;\n    this.cause = cause;\n  }\n}\n\n/**\n * A Document typed with a user-defined data type. Typescript users can cast\n * instances of {@link Document} to {@link DocumentT} to access user-defined fields with type safety.\n *\n * The example below creates a local type \"User\" that is applied to queries for documents in a\n * hypothetical \"Users\" collection.\n *\n * @example\n * ```typescript\n *  type User = {\n *    color: string\n *  }\n *\n *  const response = await client.query<DocumentT<User>>(fql`\n *    Users.byId(\"101\")\n *  `);\n *  const user = response.data;\n *\n *  const color = user.color;\n * ```\n *\n * @remarks The {@link Document} class cannot be generic because classes cannot\n * extend generic type arguments.\n */\nexport type DocumentT<T extends QueryValueObject> = Document & T;\n", "import { Client } from \"../client\";\nimport { Query, fql } from \"../query-builder\";\nimport { QueryOptions, QueryValue } from \"../wire-protocol\";\n\n/**\n * A materialized view of a Set.\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/types#set}\n */\nexport class Page<T extends QueryValue> {\n  /** A materialized page of data */\n  readonly data: T[];\n  /**\n   * A pagination cursor, used to obtain additional information in the Set.\n   * If `after` is not provided, then `data` must be present and represents the\n   * last Page in the Set.\n   */\n  readonly after?: string;\n\n  constructor({ data, after }: { data: T[]; after?: string }) {\n    this.data = data;\n    this.after = after;\n  }\n}\n\n/**\n * A un-materialized Set. Typically received when a materialized Set contains\n * another set, the EmbeddedSet does not contain any data to avoid potential\n * issues such as self-reference and infinite recursion\n * @see {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/types#set}\n */\nexport class EmbeddedSet {\n  /**\n   * A pagination cursor, used to obtain additional information in the Set.\n   */\n  readonly after: string;\n\n  constructor(after: string) {\n    this.after = after;\n  }\n}\n\n/**\n * A class to provide an iterable API for fetching multiple pages of data, given\n * a Fauna Set\n */\nexport class SetIterator<T extends QueryValue>\n  implements AsyncGenerator<T[], void, unknown>\n{\n  readonly #generator: AsyncGenerator<T[], void, unknown>;\n\n  /**\n   * Constructs a new {@link SetIterator}.\n   *\n   * @remarks Though you can use {@link SetIterator} class directly, it is\n   * most common to create an instance through the {@link Client.paginate} `paginate`\n   * method.\n   *\n   * @typeParam T - The expected type of the items returned from Fauna on each\n   * iteration\n   * @param client - The {@link Client} that will be used to fetch new data on\n   * each iteration\n   * @param initial - An existing fauna Set ({@link Page} or\n   * {@link EmbeddedSet}) or function which returns a promise. If the Promise\n   * resolves to a {@link Page} or {@link EmbeddedSet} then the iterator will\n   * use the client to fetch additional pages of data.\n   * @param options - a {@link QueryOptions} to apply to the queries. Optional.\n   */\n  constructor(\n    client: Client,\n    initial: Page<T> | EmbeddedSet | (() => Promise<T | Page<T> | EmbeddedSet>),\n    options?: QueryOptions\n  ) {\n    options = options ?? {};\n    if (initial instanceof Function) {\n      this.#generator = generateFromThunk(client, initial, options);\n    } else if (initial instanceof Page || initial instanceof EmbeddedSet) {\n      this.#generator = generatePages(client, initial, options);\n    } else {\n      throw new TypeError(\n        `Expected 'Page<T> | EmbeddedSet | (() => Promise<T | Page<T> | EmbeddedSet>)', but received ${JSON.stringify(\n          initial\n        )}`\n      );\n    }\n  }\n\n  /**\n   * Constructs a new {@link SetIterator} from an {@link Query}\n   *\n   * @internal Though you can use {@link SetIterator.fromQuery} directly, it is\n   * intended as a convenience for use in the {@link Client.paginate} method\n   */\n  static fromQuery<T extends QueryValue>(\n    client: Client,\n    query: Query,\n    options?: QueryOptions\n  ): SetIterator<T> {\n    return new SetIterator<T>(\n      client,\n      async () => {\n        const response = await client.query<T | Page<T> | EmbeddedSet>(\n          query,\n          options\n        );\n        return response.data;\n      },\n      options\n    );\n  }\n\n  /**\n   * Constructs a new {@link SetIterator} from an {@link Page} or\n   * {@link EmbeddedSet}\n   *\n   * @internal Though you can use {@link SetIterator.fromPageable} directly, it\n   * is intended as a convenience for use in the {@link Client.paginate} method\n   */\n  static fromPageable<T extends QueryValue>(\n    client: Client,\n    pageable: Page<T> | EmbeddedSet,\n    options?: QueryOptions\n  ): SetIterator<T> {\n    return new SetIterator<T>(client, pageable, options);\n  }\n\n  /**\n   * Constructs a new {@link FlattenedSetIterator} from the current instance\n   *\n   * @returns A new {@link FlattenedSetIterator} from the current instance\n   */\n  flatten(): FlattenedSetIterator<T> {\n    return new FlattenedSetIterator(this);\n  }\n\n  /** Implement {@link AsyncGenerator.next} */\n  async next(): Promise<IteratorResult<T[], void>> {\n    return this.#generator.next();\n  }\n\n  /** Implement {@link AsyncGenerator.return} */\n  async return(): Promise<IteratorResult<T[], void>> {\n    return this.#generator.return();\n  }\n\n  /** Implement {@link AsyncGenerator.throw} */\n  async throw(e: any): Promise<IteratorResult<T[], void>> {\n    return this.#generator.throw(e);\n  }\n\n  /** Implement {@link AsyncGenerator} */\n  [Symbol.asyncIterator]() {\n    return this;\n  }\n}\n\n/**\n * A class to provide an iterable API for fetching multiple pages of data, given\n * a Fauna Set. This class takes a {@link SetIterator} and flattens the results\n * to yield the items directly.\n */\nexport class FlattenedSetIterator<T extends QueryValue>\n  implements AsyncGenerator<T, void, unknown>\n{\n  readonly #generator: AsyncGenerator<T, void, unknown>;\n\n  /**\n   * Constructs a new {@link FlattenedSetIterator}.\n   *\n   * @remarks Though you can use {@link FlattenedSetIterator} class directly, it\n   * is most common to create an instance through the\n   * {@link SetIterator.flatten} method.\n   *\n   * @typeParam T - The expected type of the items returned from Fauna on each\n   * iteration\n   * @param setIterator - The {@link SetIterator}\n   */\n  constructor(setIterator: SetIterator<T>) {\n    this.#generator = generateItems(setIterator);\n  }\n\n  /** Implement {@link AsyncGenerator.next} */\n  async next(): Promise<IteratorResult<T, void>> {\n    return this.#generator.next();\n  }\n\n  /** Implement {@link AsyncGenerator.return} */\n  async return(): Promise<IteratorResult<T, void>> {\n    return this.#generator.return();\n  }\n\n  /** Implement {@link AsyncGenerator.throw} */\n  async throw(e: any): Promise<IteratorResult<T, void>> {\n    return this.#generator.throw(e);\n  }\n\n  /** Implement {@link AsyncGenerator} */\n  [Symbol.asyncIterator]() {\n    return this;\n  }\n}\n\n/**\n * Internal async generator function to use with {@link Page} and\n * {@link EmbeddedSet} values\n */\nasync function* generatePages<T extends QueryValue>(\n  client: Client,\n  initial: Page<T> | EmbeddedSet,\n  options: QueryOptions\n): AsyncGenerator<T[], void, unknown> {\n  let currentPage = initial;\n\n  if (currentPage instanceof Page) {\n    yield currentPage.data;\n  }\n\n  while (currentPage.after) {\n    // cursor means there is more data to fetch\n    const query = fql`Set.paginate(${currentPage.after})`;\n    const response = await client.query<Page<T>>(query, options);\n    const nextPage = response.data;\n\n    currentPage = nextPage;\n    yield currentPage.data;\n  }\n}\n\n/**\n * Internal async generator function to use with a function that returns a\n * promise of data. If the promise resolves to a {@link Page} or\n * {@link EmbeddedSet} then continue iterating.\n */\nasync function* generateFromThunk<T extends QueryValue>(\n  client: Client,\n  thunk: () => Promise<T | Page<T> | EmbeddedSet>,\n  options: QueryOptions\n): AsyncGenerator<T[], void, unknown> {\n  const result = await thunk();\n\n  if (result instanceof Page || result instanceof EmbeddedSet) {\n    for await (const page of generatePages(\n      client,\n      result as Page<T> | EmbeddedSet,\n      options\n    )) {\n      yield page;\n    }\n    return;\n  }\n\n  yield [result];\n}\n\n/**\n * Internal async generator function that flattens a {@link SetIterator}\n */\nasync function* generateItems<T extends QueryValue>(\n  setIterator: SetIterator<T>\n) {\n  for await (const page of setIterator) {\n    for (const item of page) {\n      yield item;\n    }\n  }\n}\n", "import { ClientError } from \"./errors\";\nimport {\n  DateStub,\n  Document,\n  DocumentReference,\n  Module,\n  NamedDocument,\n  NamedDocumentReference,\n  TimeStub,\n  Page,\n  NullDocument,\n  EmbeddedSet,\n} from \"./values\";\nimport { QueryValueObject, QueryValue } from \"./wire-protocol\";\n\nexport interface DecodeOptions {\n  long_type: \"number\" | \"bigint\";\n}\n\n/**\n * TaggedType provides the encoding/decoding of the Fauna Tagged Type formatting\n */\nexport class TaggedTypeFormat {\n  /**\n   * Encode the Object to the Tagged Type format for Fauna\n   *\n   * @param obj - Object that will be encoded\n   * @returns Map of result\n   */\n  static encode(obj: any): any {\n    return encode(obj);\n  }\n\n  /**\n   * Decode the JSON string result from Fauna to remove Tagged Type formatting.\n   *\n   * @param input - JSON string result from Fauna\n   * @returns object of result of FQL query\n   */\n  static decode(input: string, decodeOptions: DecodeOptions): any {\n    return JSON.parse(input, (_, value: any) => {\n      if (value == null) return null;\n      if (value[\"@mod\"]) {\n        return new Module(value[\"@mod\"]);\n      } else if (value[\"@doc\"]) {\n        // WIP: The string-based ref is being removed from the API\n        if (typeof value[\"@doc\"] === \"string\") {\n          const [modName, id] = value[\"@doc\"].split(\":\");\n          return new DocumentReference({ coll: modName, id: id });\n        }\n        // if not a docref string, then it is an object.\n        const obj = value[\"@doc\"];\n        if (obj.id) {\n          return new Document(obj);\n        } else {\n          return new NamedDocument(obj);\n        }\n      } else if (value[\"@ref\"]) {\n        const obj = value[\"@ref\"];\n        let ref: DocumentReference | NamedDocumentReference;\n        if (obj.id) {\n          ref = new DocumentReference(obj);\n        } else {\n          ref = new NamedDocumentReference(obj);\n        }\n        if (\"exists\" in obj && obj.exists === false) {\n          return new NullDocument(ref, obj.cause);\n        }\n        return ref;\n      } else if (value[\"@set\"]) {\n        if (typeof value[\"@set\"] === \"string\") {\n          return new EmbeddedSet(value[\"@set\"]);\n        }\n        return new Page(value[\"@set\"]);\n      } else if (value[\"@int\"]) {\n        return Number(value[\"@int\"]);\n      } else if (value[\"@long\"]) {\n        const bigInt = BigInt(value[\"@long\"]);\n        if (decodeOptions.long_type === \"number\") {\n          if (\n            bigInt > Number.MAX_SAFE_INTEGER ||\n            bigInt < Number.MIN_SAFE_INTEGER\n          ) {\n            console.warn(`Value is too large to be represented as a number. \\\nReturning as Number with loss of precision. Use long_type 'bigint' instead.`);\n          }\n          return Number(bigInt);\n        }\n        return bigInt;\n      } else if (value[\"@double\"]) {\n        return Number(value[\"@double\"]);\n      } else if (value[\"@date\"]) {\n        return DateStub.from(value[\"@date\"]);\n      } else if (value[\"@time\"]) {\n        return TimeStub.from(value[\"@time\"]);\n      } else if (value[\"@object\"]) {\n        return value[\"@object\"];\n      }\n\n      return value;\n    });\n  }\n}\n\ntype TaggedDate = { \"@date\": string };\ntype TaggedDouble = { \"@double\": string };\ntype TaggedInt = { \"@int\": string };\ntype TaggedLong = { \"@long\": string };\ntype TaggedMod = { \"@mod\": string };\ntype TaggedObject = { \"@object\": QueryValueObject };\ntype TaggedRef = {\n  \"@ref\": { id: string; coll: TaggedMod } | { name: string; coll: TaggedMod };\n};\n// WIP: core does not accept `@set` tagged values\n// type TaggedSet = { \"@set\": { data: QueryValue[]; after?: string } };\ntype TaggedTime = { \"@time\": string };\n\nexport const LONG_MIN = BigInt(\"-9223372036854775808\");\nexport const LONG_MAX = BigInt(\"9223372036854775807\");\nexport const INT_MIN = -(2 ** 31);\nexport const INT_MAX = 2 ** 31 - 1;\n\nconst encodeMap = {\n  bigint: (value: bigint): TaggedLong | TaggedInt => {\n    if (value < LONG_MIN || value > LONG_MAX) {\n      throw new RangeError(\n        \"BigInt value exceeds max magnitude for a 64-bit Fauna long. Use a 'number' to represent doubles beyond that limit.\"\n      );\n    }\n    if (value >= INT_MIN && value <= INT_MAX) {\n      return { \"@int\": value.toString() };\n    }\n    return {\n      \"@long\": value.toString(),\n    };\n  },\n  number: (value: number): TaggedDouble | TaggedInt | TaggedLong => {\n    if (\n      value === Number.POSITIVE_INFINITY ||\n      value === Number.NEGATIVE_INFINITY\n    ) {\n      throw new RangeError(`Cannot convert ${value} to a Fauna type.`);\n    }\n\n    if (!Number.isInteger(value)) {\n      return { \"@double\": value.toString() };\n    } else {\n      if (value >= INT_MIN && value <= INT_MAX) {\n        return { \"@int\": value.toString() };\n      } else if (Number.isSafeInteger(value)) {\n        return {\n          \"@long\": value.toString(),\n        };\n      }\n      return { \"@double\": value.toString() };\n    }\n  },\n  string: (value: string): string => {\n    return value;\n  },\n  object: (input: QueryValueObject): TaggedObject | QueryValueObject => {\n    let wrapped = false;\n    const _out: QueryValueObject = {};\n\n    for (const k in input) {\n      if (k.startsWith(\"@\")) {\n        wrapped = true;\n      }\n      if (input[k] !== undefined) {\n        _out[k] = encode(input[k]);\n      }\n    }\n    return wrapped ? { \"@object\": _out } : _out;\n  },\n  array: (input: Array<QueryValue>): Array<QueryValue> => {\n    const _out: QueryValue = [];\n    for (const i in input) _out.push(encode(input[i]));\n    return _out;\n  },\n  date: (dateValue: Date): TaggedTime => ({\n    \"@time\": dateValue.toISOString(),\n  }),\n  faunadate: (value: DateStub): TaggedDate => ({ \"@date\": value.dateString }),\n  faunatime: (value: TimeStub): TaggedTime => ({ \"@time\": value.isoString }),\n  module: (value: Module): TaggedMod => ({ \"@mod\": value.name }),\n  documentReference: (value: DocumentReference): TaggedRef => ({\n    \"@ref\": { id: value.id, coll: { \"@mod\": value.coll.name } },\n  }),\n  document: (value: Document): TaggedRef => ({\n    \"@ref\": { id: value.id, coll: { \"@mod\": value.coll.name } },\n  }),\n  namedDocumentReference: (value: NamedDocumentReference): TaggedRef => ({\n    \"@ref\": { name: value.name, coll: { \"@mod\": value.coll.name } },\n  }),\n  namedDocument: (value: NamedDocument): TaggedRef => ({\n    \"@ref\": { name: value.name, coll: { \"@mod\": value.coll.name } },\n  }),\n  // es-lint-disable-next-line @typescript-eslint/no-unused-vars\n  set: (value: Page<QueryValue> | EmbeddedSet) => {\n    throw new ClientError(\n      \"Page could not be encoded. Fauna does not accept encoded Set values, yet. Use Page.data and Page.after as arguments, instead.\"\n    );\n    // TODO: uncomment to encode Pages once core starts accepting `@set` tagged values\n    // if (value.data === undefined) {\n    //   // if a Page has no data, then it must still have an 'after' cursor\n    //   return { \"@set\": value.after };\n    // }\n    // return {\n    //   \"@set\": { data: encodeMap[\"array\"](value.data), after: value.after },\n    // };\n  },\n};\n\nconst encode = (input: QueryValue): QueryValue => {\n  if (input === undefined) {\n    throw new TypeError(\"Passing undefined as a QueryValue is not supported\");\n  }\n  switch (typeof input) {\n    case \"bigint\":\n      return encodeMap[\"bigint\"](input);\n    case \"string\":\n      return encodeMap[\"string\"](input);\n    case \"number\":\n      return encodeMap[\"number\"](input);\n    case \"boolean\":\n      return input;\n    case \"object\":\n      if (input == null) {\n        return null;\n      } else if (Array.isArray(input)) {\n        return encodeMap[\"array\"](input);\n      } else if (input instanceof Date) {\n        return encodeMap[\"date\"](input);\n      } else if (input instanceof DateStub) {\n        return encodeMap[\"faunadate\"](input);\n      } else if (input instanceof TimeStub) {\n        return encodeMap[\"faunatime\"](input);\n      } else if (input instanceof Module) {\n        return encodeMap[\"module\"](input);\n      } else if (input instanceof Document) {\n        // Document extends DocumentReference, so order is important here\n        return encodeMap[\"document\"](input);\n      } else if (input instanceof DocumentReference) {\n        return encodeMap[\"documentReference\"](input);\n      } else if (input instanceof NamedDocument) {\n        // NamedDocument extends NamedDocumentReference, so order is important here\n        return encodeMap[\"namedDocument\"](input);\n      } else if (input instanceof NamedDocumentReference) {\n        return encodeMap[\"namedDocumentReference\"](input);\n      } else if (input instanceof NullDocument) {\n        return encode(input.ref);\n      } else if (input instanceof Page) {\n        return encodeMap[\"set\"](input);\n      } else if (input instanceof EmbeddedSet) {\n        return encodeMap[\"set\"](input);\n      } else {\n        return encodeMap[\"object\"](input);\n      }\n  }\n  // anything here would be unreachable code\n};\n", "import { TaggedTypeFormat } from \"./tagged-type\";\nimport type {\n  QueryValueObject,\n  QueryValue,\n  QueryInterpolation,\n  QueryRequest,\n  QueryOptions,\n} from \"./wire-protocol\";\n\n/**\n * Creates a new Query. Accepts template literal inputs.\n * @param queryFragments - a {@link TemplateStringsArray} that constitute\n *   the strings that are the basis of the query.\n * @param queryArgs - an Array\\<QueryValue | Query\\> that\n *   constitute the arguments to inject between the queryFragments.\n * @throws Error - if you call this method directly (not using template\n *   literals) and pass invalid construction parameters\n * @example\n * ```typescript\n *  const str = \"baz\";\n *  const num = 17;\n *  const innerQuery = fql`${num} + 3)`;\n *  const queryRequestBuilder = fql`${str}.length == ${innerQuery}`;\n * ```\n */\nexport function fql(\n  queryFragments: ReadonlyArray<string>,\n  ...queryArgs: (QueryValue | Query)[]\n): Query {\n  return new Query(queryFragments, ...queryArgs);\n}\n\n/**\n * Internal class.\n * A builder for composing queries using the {@link fql} tagged template\n * function\n */\nexport class Query {\n  readonly #queryFragments: ReadonlyArray<string>;\n  readonly #queryArgs: (QueryValue | Query)[];\n\n  constructor(\n    queryFragments: ReadonlyArray<string>,\n    ...queryArgs: (QueryValue | Query)[]\n  ) {\n    if (\n      queryFragments.length === 0 ||\n      queryFragments.length !== queryArgs.length + 1\n    ) {\n      throw new Error(\"invalid query constructed\");\n    }\n    this.#queryFragments = queryFragments;\n    this.#queryArgs = queryArgs;\n  }\n\n  /**\n   * Converts this Query to a {@link QueryRequest} you can send\n   * to Fauna.\n   * @param requestHeaders - optional {@link QueryOptions} to include\n   *   in the request (and thus override the defaults in your {@link ClientConfiguration}.\n   *   If not passed in, no headers will be set as overrides.\n   * @returns a {@link QueryRequest}.\n   * @example\n   * ```typescript\n   *  const num = 8;\n   *  const queryBuilder = fql`'foo'.length == ${num}`;\n   *  const queryRequest = queryBuilder.toQuery();\n   *  // produces:\n   *  { query: { fql: [\"'foo'.length == \", { value: { \"@int\": \"8\" } }, \"\"] }}\n   * ```\n   */\n  toQuery(requestHeaders: QueryOptions = {}): QueryRequest {\n    return { ...this.#render(requestHeaders), ...requestHeaders };\n  }\n\n  #render(requestHeaders: QueryOptions): QueryRequest {\n    if (this.#queryFragments.length === 1) {\n      return { query: { fql: [this.#queryFragments[0]] }, arguments: {} };\n    }\n\n    let resultArgs: QueryValueObject = {};\n    const renderedFragments: (string | QueryInterpolation)[] =\n      this.#queryFragments.flatMap((fragment, i) => {\n        // There will always be one more fragment than there are arguments\n        if (i === this.#queryFragments.length - 1) {\n          return fragment === \"\" ? [] : [fragment];\n        }\n\n        const arg = this.#queryArgs[i];\n        let subQuery: string | QueryInterpolation;\n        if (arg instanceof Query) {\n          const request = arg.toQuery(requestHeaders);\n          subQuery = request.query;\n          resultArgs = { ...resultArgs, ...request.arguments };\n        } else {\n          // arguments in the template format must always be encoded, regardless\n          // of the \"x-format\" request header\n          // TODO: catch and rethrow Errors, indicating bad user input\n          subQuery = { value: TaggedTypeFormat.encode(arg) };\n        }\n\n        return [fragment, subQuery].filter((x) => x !== \"\");\n      });\n\n    return {\n      query: { fql: renderedFragments },\n      arguments: resultArgs,\n    };\n  }\n}\n", "//THIS FILE IS AUTOGENERATED. DO NOT EDIT. SEE .husky/pre-commit\n\n/** The current package version. */\nexport const packageVersion = \"1.0.1\";\n", "import { packageVersion } from \"./package-version\";\n\nlet os: any;\ntry {\n  os = require(\"node:os\");\n} catch (_) {\n  os = undefined;\n}\n\n/**\n * Function to put all of the environment details together.\n * @internal\n */\nexport const getDriverEnv = (): string => {\n  const driverEnv = {\n    driver: [\"javascript\", packageVersion].join(\"-\"),\n    env: \"unknown\",\n    os: \"unknown\",\n    runtime: \"unknown\",\n  };\n\n  try {\n    /**\n     * Determine if we're executing in a Node environment\n     */\n    const isNode =\n      typeof window === \"undefined\" &&\n      typeof process !== \"undefined\" &&\n      process.versions != null &&\n      process.versions.node != null;\n\n    /**\n     * Determine if we're executing in a Node environment\n     */\n    const isBrowser =\n      typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n\n    /**\n     * Determine if we're executing in a Service Worker environment\n     */\n    const isServiceWorker =\n      typeof self === \"object\" &&\n      self.constructor &&\n      self.constructor.name === \"DedicatedWorkerGlobalScope\";\n\n    /**\n     * Determine if we're executing in Vercel's Edge Runtime\n     * @see {@link https://vercel.com/docs/concepts/functions/edge-functions/edge-runtime#check-if-you're-running-on-the-edge-runtime}\n     */\n    // @ts-expect-error Cannot find name 'EdgeRuntime'\n    const isVercelEdgeRuntime = typeof EdgeRuntime !== \"string\";\n\n    if (isNode) {\n      driverEnv.runtime = [\"nodejs\", process.version].join(\"-\");\n      driverEnv.env = getNodeRuntimeEnv();\n      driverEnv.os = [os.platform(), os.release()].join(\"-\");\n    } else if (isServiceWorker) {\n      driverEnv.runtime = getBrowserDetails(navigator);\n      driverEnv.env = \"Service Worker\";\n      driverEnv.os = getBrowserOsDetails(navigator);\n    } else if (isBrowser) {\n      driverEnv.runtime = getBrowserDetails(navigator);\n      driverEnv.env = \"browser\";\n      driverEnv.os = getBrowserOsDetails(navigator);\n    } else if (isVercelEdgeRuntime) {\n      driverEnv.runtime = \"Vercel Edge Runtime\";\n      driverEnv.env = \"edge\";\n    }\n  } catch (e) {\n    // ignore errors trying to report on user environment\n  }\n\n  return (\n    Object.entries(driverEnv)\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      .filter(([_, val]) => val !== \"unknown\")\n      .map((entry: [string, string]) => entry.join(\"=\"))\n      .join(\"; \")\n  );\n};\n\n/**\n * Get browser environment details\n */\nconst getBrowserDetails = (navigator: Navigator | WorkerNavigator): string => {\n  let browser: string = navigator.appName;\n  let browserVersion = \"\" + parseFloat(navigator.appVersion);\n  let nameOffset, verOffset, ix;\n\n  // Opera\n  if ((verOffset = navigator.userAgent.indexOf(\"Opera\")) != -1) {\n    browser = \"Opera\";\n    browserVersion = navigator.userAgent.substring(verOffset + 6);\n    if ((verOffset = navigator.userAgent.indexOf(\"Version\")) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8);\n    }\n  }\n  // MSIE\n  else if ((verOffset = navigator.userAgent.indexOf(\"MSIE\")) != -1) {\n    browser = \"Microsoft Internet Explorer\";\n    browserVersion = navigator.userAgent.substring(verOffset + 5);\n  }\n\n  //IE 11 no longer identifies itself as MS IE, so trap it\n  //http://stackoverflow.com/questions/17907445/how-to-detect-ie11\n  else if (\n    browser == \"Netscape\" &&\n    navigator.userAgent.indexOf(\"Trident/\") != -1\n  ) {\n    browser = \"Microsoft Internet Explorer\";\n    browserVersion = navigator.userAgent.substring(verOffset + 5);\n    if ((verOffset = navigator.userAgent.indexOf(\"rv:\")) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 3);\n    }\n  }\n\n  // Chrome\n  else if ((verOffset = navigator.userAgent.indexOf(\"Chrome\")) != -1) {\n    browser = \"Chrome\";\n    browserVersion = navigator.userAgent.substring(verOffset + 7);\n  }\n  // Safari\n  else if ((verOffset = navigator.userAgent.indexOf(\"Safari\")) != -1) {\n    browser = \"Safari\";\n    browserVersion = navigator.userAgent.substring(verOffset + 7);\n    if ((verOffset = navigator.userAgent.indexOf(\"Version\")) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8);\n    }\n\n    // Chrome on iPad identifies itself as Safari. Actual results do not match what Google claims\n    //  at: https://developers.google.com/chrome/mobile/docs/user-agent?hl=ja\n    //  No mention of chrome in the user agent string. However it does mention CriOS, which presumably\n    //  can be keyed on to detect it.\n    if (navigator.userAgent.indexOf(\"CriOS\") != -1) {\n      //Chrome on iPad spoofing Safari...correct it.\n      browser = \"Chrome\";\n      //Don't believe there is a way to grab the accurate version number, so leaving that for now.\n    }\n  }\n  // Firefox\n  else if ((verOffset = navigator.userAgent.indexOf(\"Firefox\")) != -1) {\n    browser = \"Firefox\";\n    browserVersion = navigator.userAgent.substring(verOffset + 8);\n  }\n  // Other browsers\n  else if (\n    (nameOffset = navigator.userAgent.lastIndexOf(\" \") + 1) <\n    (verOffset = navigator.userAgent.lastIndexOf(\"/\"))\n  ) {\n    browser = navigator.userAgent.substring(nameOffset, verOffset);\n    browserVersion = navigator.userAgent.substring(verOffset + 1);\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName;\n    }\n  }\n  // trim the browser version string\n  if ((ix = browserVersion.indexOf(\";\")) != -1)\n    browserVersion = browserVersion.substring(0, ix);\n  if ((ix = browserVersion.indexOf(\" \")) != -1)\n    browserVersion = browserVersion.substring(0, ix);\n  if ((ix = browserVersion.indexOf(\")\")) != -1)\n    browserVersion = browserVersion.substring(0, ix);\n\n  return [browser, browserVersion].join(\"-\");\n};\n\n/**\n * Get OS details for the browser\n */\nconst getBrowserOsDetails = (\n  navigator: Navigator | WorkerNavigator\n): string => {\n  let os = \"unknown\";\n  const clientStrings = [\n    { s: \"Windows 10\", r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: \"Windows 8.1\", r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: \"Windows 8\", r: /(Windows 8|Windows NT 6.2)/ },\n    { s: \"Windows 7\", r: /(Windows 7|Windows NT 6.1)/ },\n    { s: \"Windows Vista\", r: /Windows NT 6.0/ },\n    { s: \"Windows Server 2003\", r: /Windows NT 5.2/ },\n    { s: \"Windows XP\", r: /(Windows NT 5.1|Windows XP)/ },\n    { s: \"Windows 2000\", r: /(Windows NT 5.0|Windows 2000)/ },\n    { s: \"Windows ME\", r: /(Win 9x 4.90|Windows ME)/ },\n    { s: \"Windows 98\", r: /(Windows 98|Win98)/ },\n    { s: \"Windows 95\", r: /(Windows 95|Win95|Windows_95)/ },\n    { s: \"Windows NT 4.0\", r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n    { s: \"Windows CE\", r: /Windows CE/ },\n    { s: \"Windows 3.11\", r: /Win16/ },\n    { s: \"Android\", r: /Android/ },\n    { s: \"Open BSD\", r: /OpenBSD/ },\n    { s: \"Sun OS\", r: /SunOS/ },\n    { s: \"Chrome OS\", r: /CrOS/ },\n    { s: \"Linux\", r: /(Linux|X11(?!.*CrOS))/ },\n    { s: \"iOS\", r: /(iPhone|iPad|iPod)/ },\n    { s: \"Mac OS X\", r: /Mac OS X/ },\n    { s: \"Mac OS\", r: /(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: \"QNX\", r: /QNX/ },\n    { s: \"UNIX\", r: /UNIX/ },\n    { s: \"BeOS\", r: /BeOS/ },\n    { s: \"OS/2\", r: /OS\\/2/ },\n    {\n      s: \"Search Bot\",\n      r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/,\n    },\n  ];\n  for (const id in clientStrings) {\n    const cs = clientStrings[id];\n    if (cs.r.test(navigator.userAgent)) {\n      os = cs.s;\n      break;\n    }\n  }\n\n  let osVersion: string | undefined = \"unknown\";\n\n  if (/Windows/.test(os)) {\n    osVersion;\n    const matches = /Windows (.*)/.exec(os);\n    if (matches) {\n      osVersion = matches[1];\n    }\n    os = \"Windows\";\n  }\n\n  switch (os) {\n    case \"Mac OS\":\n    case \"Mac OS X\":\n    case \"Android\": {\n      const matches =\n        /(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([._\\d]+)/.exec(\n          navigator.userAgent\n        );\n      if (matches) {\n        osVersion = matches[1];\n      }\n      break;\n    }\n\n    case \"iOS\": {\n      const matches = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(navigator.appVersion);\n      if (matches) {\n        osVersion = matches[1] + \".\" + matches[2] + \".\" + (matches[3] ?? 0);\n      }\n      break;\n    }\n  }\n  return [os, osVersion].join(\"-\");\n};\n\nconst crossGlobal =\n  typeof window !== \"undefined\"\n    ? window\n    : typeof globalThis !== \"undefined\"\n    ? globalThis\n    : typeof global !== \"undefined\"\n    ? global\n    : self;\n\n/**\n * Get node environment details\n */\nconst getNodeRuntimeEnv = (): string => {\n  // return early if process variables are not available\n  if (\n    !(\n      typeof process !== \"undefined\" &&\n      process &&\n      process.env &&\n      typeof process.env === \"object\"\n    )\n  ) {\n    return \"unknown\";\n  }\n\n  const runtimeEnvs = [\n    {\n      name: \"Netlify\",\n      check: function (): boolean {\n        return !!process.env[\"NETLIFY_IMAGES_CDN_DOMAIN\"];\n      },\n    },\n    {\n      name: \"Vercel\",\n      check: function (): boolean {\n        return !!process.env[\"VERCEL\"];\n      },\n    },\n    {\n      name: \"Heroku\",\n      check: function (): boolean {\n        return (\n          !!process.env[\"PATH\"] && process.env.PATH.indexOf(\".heroku\") !== -1\n        );\n      },\n    },\n    {\n      name: \"AWS Lambda\",\n      check: function (): boolean {\n        return !!process.env[\"AWS_LAMBDA_FUNCTION_VERSION\"];\n      },\n    },\n    {\n      name: \"GCP Cloud Functions\",\n      check: function (): boolean {\n        return !!process.env[\"_\"] && process.env._.indexOf(\"google\") !== -1;\n      },\n    },\n    {\n      name: \"GCP Compute Instances\",\n      check: function (): boolean {\n        return !!process.env[\"GOOGLE_CLOUD_PROJECT\"];\n      },\n    },\n    {\n      name: \"Azure Cloud Functions\",\n      check: function (): boolean {\n        return !!process.env[\"WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES\"];\n      },\n    },\n    {\n      name: \"Azure Compute\",\n      check: function (): boolean {\n        return (\n          !!process.env[\"ORYX_ENV_TYPE\"] &&\n          !!process.env[\"WEBSITE_INSTANCE_ID\"] &&\n          process.env.ORYX_ENV_TYPE === \"AppService\"\n        );\n      },\n    },\n    {\n      name: \"Mongo Stitch\",\n      check: function (): boolean {\n        // @ts-expect-error Element implicitly has an 'any' type because type 'typeof globalThis' has no index signature.ts(7017)\n        return typeof crossGlobal?.StitchError === \"function\";\n      },\n    },\n    {\n      name: \"Render\",\n      check: function (): boolean {\n        return !!process.env[\"RENDER_SERVICE_ID\"];\n      },\n    },\n    {\n      name: \"Begin\",\n      check: function (): boolean {\n        return !!process.env[\"BEGIN_DATA_SCOPE_ID\"];\n      },\n    },\n  ];\n  const detectedEnv = runtimeEnvs.find((env) => env.check());\n\n  return detectedEnv ? detectedEnv.name : \"unknown\";\n};\n", "// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { fql } from \"./query-builder\";\nimport {\n  DateStub,\n  Document,\n  DocumentReference,\n  EmbeddedSet,\n  Module,\n  NamedDocument,\n  NamedDocumentReference,\n  NullDocument,\n  Page,\n  TimeStub,\n} from \"./values\";\n\n/**\n * A request to make to Fauna.\n */\nexport interface QueryRequest {\n  /** The query */\n  query: string | QueryInterpolation;\n\n  /** Optional arguments. Variables in the query will be initialized to the\n   * value associated with an argument key.\n   */\n  arguments?: QueryValueObject;\n}\n\n/**\n * Options for queries. Each query can be made with different options. Settings here\n * take precedence over those in {@link ClientConfiguration}.\n */\nexport interface QueryOptions {\n  /** Optional arguments. Variables in the query will be initialized to the\n   * value associated with an argument key.\n   */\n  arguments?: QueryValueObject;\n\n  /**\n   * Determines the encoded format expected for the query `arguments` field, and\n   * the `data` field of a successful response.\n   * Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  format?: ValueFormat;\n\n  /**\n   * If true, unconditionally run the query as strictly serialized.\n   * This affects read-only transactions. Transactions which write\n   * will always be strictly serialized.\n   * Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  linearized?: boolean;\n\n  /**\n   * Controls what Javascript type to deserialize {@link https://fqlx-beta--fauna-docs.netlify.app/fqlx/beta/reference/language/types#long | Fauna longs} to.\n   * Use 'number' to deserialize longs to number. Use 'bigint' to deserialize to bigint. Defaults to 'number'.\n   * Note, for extremely large maginitude numbers Javascript's number will lose precision; as Javascript's\n   * 'number' can only support +/- 2^53-1 whereas Fauna's long is 64 bit. If this is detected, a warning will\n   * be logged to the console and precision loss will occur.\n   * If your application uses extremely large magnitude numbers use 'bigint'.\n   */\n  long_type?: \"number\" | \"bigint\";\n\n  /**\n   * The max number of times to retry the query if contention is encountered.\n   *Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  max_contention_retries?: number;\n\n  /**\n   * Tags provided back via logging and telemetry.\n   * Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  query_tags?: Record<string, string>;\n\n  /**\n   * The timeout to use in this query in milliseconds.\n   * Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  query_timeout_ms?: number;\n\n  /**\n   * A traceparent provided back via logging and telemetry.\n   * Must match format: https://www.w3.org/TR/trace-context/#traceparent-header\n   * Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  traceparent?: string;\n\n  /**\n   * Enable or disable typechecking of the query before evaluation. If no value\n   * is provided, the value of `typechecked` in the database configuration will\n   * be used.\n   * Overrides the optional setting on the {@link ClientConfiguration}.\n   */\n  typecheck?: boolean;\n}\n\n/**\n * tagged declares that type information is transmitted and received by the driver.\n * \"simple\" indicates it is not - pure JSON is used.\n * \"decorated\" will cause the service output to be shown in FQL syntax that could\n * hypothetically be used to query Fauna. This is intended to support CLI and\n * REPL like tools.\n * @example\n * ```typescript\n * // example of decorated output\n * { time: Time(\"2012-01-01T00:00:00Z\") }\n * ```\n */\nexport declare type ValueFormat = \"simple\" | \"tagged\" | \"decorated\";\n\nexport type QueryStats = {\n  /** The amount of Transactional Compute Ops consumed by the query. */\n  compute_ops: number;\n  /** The amount of Transactional Read Ops consumed by the query. */\n  read_ops: number;\n  /** The amount of Transactional Write Ops consumed by the query. */\n  write_ops: number;\n  /** The query run time in milliseconds. */\n  query_time_ms: number;\n  /** The amount of data read from storage, in bytes. */\n  storage_bytes_read: number;\n  /** The amount of data written to storage, in bytes. */\n  storage_bytes_write: number;\n  /** The number of times the transaction was retried due to write contention. */\n  contention_retries: number;\n};\n\nexport type QueryInfo = {\n  /** The last transaction timestamp of the query. A Unix epoch in microseconds. */\n  txn_ts?: number;\n  /** The schema version that was used for the query execution. */\n  schema_version?: number;\n  /** A readable summary of any warnings or logs emitted by the query. */\n  summary?: string;\n  /** The value of the x-query-tags header, if it was provided. */\n  query_tags?: Record<string, string>;\n  /** Stats on query performance and cost */\n  stats?: QueryStats;\n};\n\nexport type QuerySuccess<T> = QueryInfo & {\n  /**\n   * The result of the query. The data is any valid JSON value.\n   * @remarks\n   * data is type parameterized so that you can treat it as a\n   * certain type if you are using typescript.\n   */\n  data: T;\n  /** The query's inferred static result type. */\n  static_type?: string;\n};\n\n/**\n * A failed query response. Integrations which only want to report a human\n * readable version of the failure can simply print out the \"summary\" field.\n */\nexport type QueryFailure = QueryInfo & {\n  /**\n   * The result of the query resulting in\n   */\n  error: {\n    /** A predefined code which indicates the type of error. See XXX for a list of error codes. */\n    code: string;\n    /** A short, human readable description of the error */\n    message: string;\n    /**\n     * A machine readable description of any constraint failures encountered by the query.\n     * Present only if this query encountered constraint failures.\n     */\n    constraint_failures?: Array<ConstraintFailure>;\n    /**\n     * The user provided value passed to the originating `abort()` call.\n     * Present only when the query encountered an `abort()` call, which is\n     * denoted by the error code `\"abort\"`\n     */\n    abort?: QueryValue;\n  };\n};\n\n/**\n * A constraint failure triggered by a query.\n */\nexport type ConstraintFailure = {\n  /** Description of the constraint failure */\n  message: string;\n  /** Name of the failed constraint */\n  name?: string;\n  /** Path into the write input data to which the failure applies */\n  paths?: Array<number | string>;\n};\n\nexport type QueryResponse<T> = QuerySuccess<T> | QueryFailure;\n\nexport const isQuerySuccess = (res: any): res is QuerySuccess<any> =>\n  res instanceof Object && \"data\" in res;\n\nexport const isQueryFailure = (res: any): res is QueryFailure =>\n  res instanceof Object &&\n  \"error\" in res &&\n  res.error instanceof Object &&\n  \"code\" in res.error &&\n  \"message\" in res.error;\n\nexport const isQueryResponse = (res: any): res is QueryResponse<any> =>\n  isQueryResponse(res) || isQueryFailure(res);\n\n/**\n * A piece of an interpolated query. Interpolated queries can be safely composed\n * together without concern of query string injection.\n * @see {@link ValueFragment} and {@link FQLFragment} for additional\n * information\n */\nexport type QueryInterpolation = FQLFragment | ValueFragment;\n\n/**\n * A piece of an interpolated query that represents an actual value. Arguments\n * are passed to fauna using ValueFragments so that query string injection is\n * not possible.\n * @remarks A ValueFragment is created by this driver when a literal value or\n * object is provided as an argument to the {@link fql} tagged template\n * function.\n *\n * ValueFragments must always be encoded with tags, regardless of the \"x-format\"\n * request header sent.\n * @example\n * ```typescript\n *  const num = 17;\n *  const query = fql`${num} + 3)`;\n *  // produces\n *  { fql: [{ value: { \"@int\": \"17\" } }, \" + 3\"] }\n * ```\n */\nexport type ValueFragment = { value: QueryValue };\n\n/**\n * A piece of an interpolated query. Interpolated Queries can be safely composed\n * together without concern of query string injection.\n * @remarks A FQLFragment is created when calling the {@link fql} tagged\n * template function and can be passed as an argument to other Querys.\n * @example\n * ```typescript\n *  const num = 17;\n *  const query1 = fql`${num} + 3)`;\n *  const query2 = fql`5 + ${query1})`;\n *  // produces\n *  { fql: [\"5 + \", { fql: [{ value: { \"@int\": \"17\" } }, \" + 3\"] }] }\n * ```\n */\nexport type FQLFragment = { fql: (string | QueryInterpolation)[] };\n\n/**\n * A source span indicating a segment of FQL.\n */\nexport interface Span {\n  /**\n   * A string identifier of the FQL source. For example, if performing\n   * a raw query against the API this would be *query*.\n   */\n  src: string;\n  /**\n   * The span's starting index within the src, inclusive.\n   */\n  start: number;\n  /**\n   * The span's ending index within the src, inclusive.\n   */\n  end: number;\n  /**\n   * The name of the enclosing function, if applicable.\n   */\n  function: string;\n}\n\n/**\n * A QueryValueObject is a plain javascript object where\n * each value is a QueryValue.\n * i.e. these objects can be set as values\n * in the {@link fql} query creation function and can be\n * returned in {@link QuerySuccess}.\n */\nexport type QueryValueObject = {\n  [key: string]: QueryValue;\n};\n\n/**\n * A QueryValue can be sent as a value in a query,\n * and received from query output.\n * i.e. these are the types you can set as values\n * in the {@link fql} query creation function and can be\n * returned in {@link QuerySuccess}.\n */\nexport type QueryValue =\n  // plain javascript values\n  | null\n  | string\n  | number\n  | bigint\n  | boolean\n  | QueryValueObject\n  | Array<QueryValue>\n  // client-provided classes\n  | DateStub\n  | TimeStub\n  | Module\n  | Document\n  | DocumentReference\n  | NamedDocument\n  | NamedDocumentReference\n  | NullDocument\n  | Page<QueryValue>\n  | EmbeddedSet;\n", "import { ClientConfiguration, endpoints } from \"./client-configuration\";\nimport {\n  AuthenticationError,\n  AuthorizationError,\n  ClientClosedError,\n  ClientError,\n  NetworkError,\n  ProtocolError,\n  AbortError,\n  QueryCheckError,\n  QueryRuntimeError,\n  QueryTimeoutError,\n  ServiceError,\n  ServiceInternalError,\n  ServiceTimeoutError,\n  ThrottlingError,\n  ContendedTransactionError,\n  InvalidRequestError,\n} from \"./errors\";\nimport {\n  getDefaultHTTPClient,\n  isHTTPResponse,\n  type HTTPClient,\n} from \"./http-client\";\nimport { Query } from \"./query-builder\";\nimport { TaggedTypeFormat } from \"./tagged-type\";\nimport { getDriverEnv } from \"./util/environment\";\nimport { EmbeddedSet, Page, SetIterator } from \"./values\";\nimport {\n  isQueryFailure,\n  isQuerySuccess,\n  QueryInterpolation,\n  type QueryFailure,\n  type QueryOptions,\n  type QuerySuccess,\n  type QueryValue,\n} from \"./wire-protocol\";\n\ntype RequiredClientConfig = ClientConfiguration &\n  Required<\n    Pick<\n      ClientConfiguration,\n      | \"client_timeout_buffer_ms\"\n      | \"endpoint\"\n      | \"fetch_keepalive\"\n      | \"http2_max_streams\"\n      | \"http2_session_idle_ms\"\n      | \"secret\"\n      // required default query options\n      | \"format\"\n      | \"long_type\"\n      | \"query_timeout_ms\"\n    >\n  >;\n\nconst DEFAULT_CLIENT_CONFIG: Omit<\n  ClientConfiguration & RequiredClientConfig,\n  \"secret\"\n> = {\n  client_timeout_buffer_ms: 5000,\n  endpoint: endpoints.default,\n  format: \"tagged\",\n  http2_session_idle_ms: 5000,\n  http2_max_streams: 100,\n  long_type: \"number\",\n  fetch_keepalive: false,\n  query_timeout_ms: 5000,\n};\n\n/**\n * Client for calling Fauna.\n */\nexport class Client {\n  /** A static copy of the driver env header to send with each request */\n  static readonly #driverEnvHeader = getDriverEnv();\n\n  /** The {@link ClientConfiguration} */\n  readonly #clientConfiguration: RequiredClientConfig;\n  /** The underlying {@link HTTPClient} client. */\n  readonly #httpClient: HTTPClient;\n  /** The last transaction timestamp this client has seen */\n  #lastTxnTs?: number;\n  /** true if this client is closed false otherwise */\n  #isClosed = false;\n\n  /**\n   * Constructs a new {@link Client}.\n   * @param clientConfiguration - the {@link ClientConfiguration} to apply. Defaults to recommended ClientConfiguraiton.\n   * @param httpClient - The underlying {@link HTTPClient} that will execute the actual HTTP calls. Defaults to recommended HTTPClient.\n   * @example\n   * ```typescript\n   *  const myClient = new Client(\n   *   {\n   *     endpoint: endpoints.cloud,\n   *     secret: \"foo\",\n   *     query_timeout_ms: 60_000,\n   *   }\n   * );\n   * ```\n   */\n  constructor(\n    clientConfiguration?: ClientConfiguration,\n    httpClient?: HTTPClient\n  ) {\n    this.#clientConfiguration = {\n      ...DEFAULT_CLIENT_CONFIG,\n      ...clientConfiguration,\n      secret: this.#getSecret(clientConfiguration),\n    };\n\n    this.#validateConfiguration();\n\n    if (!httpClient) {\n      this.#httpClient = getDefaultHTTPClient({\n        url: this.#clientConfiguration.endpoint.toString(),\n        http2_session_idle_ms: this.#clientConfiguration.http2_session_idle_ms,\n        http2_max_streams: this.#clientConfiguration.http2_max_streams,\n        fetch_keepalive: this.#clientConfiguration.fetch_keepalive,\n      });\n    } else {\n      this.#httpClient = httpClient;\n    }\n  }\n\n  /**\n   * @returns the last transaction time seen by this client, or undefined if this client has not seen a transaction time.\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore it's okay that #lastTxnTs could be undefined on get, but we want\n  //   to enforce that the user never intentionally set it to undefined.\n  get lastTxnTs(): number | undefined {\n    return this.#lastTxnTs;\n  }\n  /**\n   * Sets the last transaction time of this client.\n   * @param ts - the last transaction timestamp to set, as microseconds since\n   *   the epoch. If `ts` is less than the existing `#lastTxnTs` value, then no\n   *   change is made.\n   */\n  set lastTxnTs(ts: number) {\n    this.#lastTxnTs = this.#lastTxnTs ? Math.max(ts, this.#lastTxnTs) : ts;\n  }\n\n  /**\n   * Return the {@link ClientConfiguration} of this client, save for the secret.\n   */\n  get clientConfiguration(): Omit<ClientConfiguration, \"secret\"> {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { secret, ...rest } = this.#clientConfiguration;\n    return rest;\n  }\n\n  /**\n   * Closes the underlying HTTP client. Subsquent query or close calls\n   * will fail.\n   */\n  close() {\n    if (this.#isClosed) {\n      throw new ClientClosedError(\n        \"Your client is closed. You cannot close it again.\"\n      );\n    }\n    this.#httpClient.close();\n    this.#isClosed = true;\n  }\n\n  /**\n   * Creates an iterator to yield pages of data. If additional pages exist, the\n   * iterator will lazily fetch addition pages on each iteration.\n   *\n   * @typeParam T - The expected type of the items returned from Fauna on each\n   * iteration\n   * @param iterable - a {@link Query} or an existing fauna Set ({@link Page} or\n   * {@link EmbeddedSet})\n   * @param options - a {@link QueryOptions} to apply to the queries. Optional.\n   * @returns A {@link SetIterator} that lazily fetches new pages of data on\n   * each iteration\n   *\n   * @example\n   * ```javascript\n   *  const userIterator = await client.paginate(fql`\n   *    Users.all()\n   *  `);\n   *\n   *  for await (const users of userIterator) {\n   *    for (const user of users) {\n   *      // do something with each user\n   *    }\n   *  }\n   * ```\n   *\n   * @example\n   * The {@link SetIterator.flatten} method can be used so the iterator yields\n   * items directly. Each item is fetched asynchronously and hides when\n   * additional pages are fetched.\n   *\n   * ```javascript\n   *  const userIterator = await client.paginate(fql`\n   *    Users.all()\n   *  `);\n   *\n   *  for await (const user of userIterator.flatten()) {\n   *    // do something with each user\n   *  }\n   * ```\n   */\n  paginate<T extends QueryValue>(\n    iterable: Page<T> | EmbeddedSet | Query,\n    options?: QueryOptions\n  ): SetIterator<T> {\n    if (iterable instanceof Query) {\n      return SetIterator.fromQuery(this, iterable, options);\n    }\n    return SetIterator.fromPageable(this, iterable, options) as SetIterator<T>;\n  }\n\n  /**\n   * Queries Fauna.\n   *\n   * @typeParam T - The expected type of the response from Fauna\n   * @param query - a {@link Query} to execute in Fauna.\n   *  Note, you can embed header fields in this object; if you do that there's no need to\n   *  pass the headers parameter.\n   * @param options - optional {@link QueryOptions} to apply on top of the request input.\n   *   Values in this headers parameter take precedence over the same values in the {@link ClientConfiguration}.\n   * @returns Promise&lt;{@link QuerySuccess}&gt;.\n   *\n   * @throws {@link ServiceError} Fauna emitted an error. The ServiceError will be\n   *   one of ServiceError's child classes if the error can be further categorized,\n   *   or a concrete ServiceError if it cannot. ServiceError child types are\n   *   {@link AuthenticaionError}, {@link AuthorizationError}, {@link QueryCheckError}\n   *   {@link QueryRuntimeError}, {@link QueryTimeoutError}, {@link ServiceInternalError}\n   *   {@link ServiceTimeoutError}, {@link ThrottlingError}.\n   *   You can use either the type, or the underlying httpStatus + code to determine\n   *   the root cause.\n   * @throws {@link ProtocolError} the client a HTTP error not sent by Fauna.\n   * @throws {@link NetworkError} the client encountered a network issue\n   * connecting to Fauna.\n   * @throws A {@link ClientError} the client fails to submit the request\n   * @throws {@link ClientClosedError} if a query is issued after the client is closed.\n   * due to an internal error.\n   */\n  async query<T extends QueryValue>(\n    query: Query,\n    options?: QueryOptions\n  ): Promise<QuerySuccess<T>> {\n    if (this.#isClosed) {\n      throw new ClientClosedError(\n        \"Your client is closed. No further requests can be issued.\"\n      );\n    }\n\n    // QueryInterpolation values must always be encoded.\n    // TODO: The Query implementation never set the QueryRequest arguments.\n    //   When we separate query building from query encoding we should be able\n    //   to simply do `const queryInterpolation: TaggedTypeFormat.encode(query)`\n    const queryInterpolation = query.toQuery(options).query;\n\n    return this.#query(queryInterpolation, options);\n  }\n\n  #getError(e: any): ClientError | NetworkError | ProtocolError | ServiceError {\n    // the error was already handled by the driver\n    if (\n      e instanceof ClientError ||\n      e instanceof NetworkError ||\n      e instanceof ProtocolError ||\n      e instanceof ServiceError\n    ) {\n      return e;\n    }\n\n    // the HTTP request succeeded, but there was an error\n    if (isHTTPResponse(e)) {\n      // we got an error from the fauna service\n      if (isQueryFailure(e.body)) {\n        const failure = e.body;\n        const status = e.status;\n        return this.#getServiceError(failure, status);\n      }\n\n      // we got a different error from the protocol layer\n      return new ProtocolError({\n        message: `Response is in an unkown format: ${e.body}`,\n        httpStatus: e.status,\n      });\n    }\n\n    // unknown error\n    return new ClientError(\n      \"A client level error occurred. Fauna was not called.\",\n      {\n        cause: e,\n      }\n    );\n  }\n\n  #getSecret(partialClientConfig?: ClientConfiguration): string {\n    let fallback = undefined;\n    if (\n      typeof process !== \"undefined\" &&\n      process &&\n      typeof process === \"object\" &&\n      process.env &&\n      typeof process.env === \"object\"\n    ) {\n      fallback = process.env[\"FAUNA_SECRET\"];\n    }\n\n    const maybeSecret = partialClientConfig?.secret || fallback;\n    if (maybeSecret === undefined) {\n      throw new Error(\n        \"You must provide a secret to the driver. Set it \\\nin an environmental variable named FAUNA_SECRET or pass it to the Client\\\n constructor.\"\n      );\n    }\n    return maybeSecret;\n  }\n\n  #getServiceError(failure: QueryFailure, httpStatus: number): ServiceError {\n    switch (httpStatus) {\n      case 400:\n        if (QUERY_CHECK_FAILURE_CODES.includes(failure.error.code)) {\n          return new QueryCheckError(failure, httpStatus);\n        }\n        if (failure.error.code === \"invalid_request\") {\n          return new InvalidRequestError(failure, httpStatus);\n        }\n        if (\n          failure.error.code === \"abort\" &&\n          failure.error.abort !== undefined\n        ) {\n          return new AbortError(\n            failure as QueryFailure & { error: { abort: QueryValue } },\n            httpStatus\n          );\n        }\n        return new QueryRuntimeError(failure, httpStatus);\n      case 401:\n        return new AuthenticationError(failure, httpStatus);\n      case 403:\n        return new AuthorizationError(failure, httpStatus);\n      case 409:\n        return new ContendedTransactionError(failure, httpStatus);\n      case 429:\n        return new ThrottlingError(failure, httpStatus);\n      case 440:\n        return new QueryTimeoutError(failure, httpStatus);\n      case 500:\n        return new ServiceInternalError(failure, httpStatus);\n      case 503:\n        return new ServiceTimeoutError(failure, httpStatus);\n      default:\n        return new ServiceError(failure, httpStatus);\n    }\n  }\n\n  async #query<T extends QueryValue>(\n    queryInterpolation: string | QueryInterpolation,\n    options?: QueryOptions\n  ): Promise<QuerySuccess<T>> {\n    try {\n      const requestConfig = {\n        ...this.#clientConfiguration,\n        ...options,\n      };\n\n      const headers = {\n        Authorization: `Bearer ${this.#clientConfiguration.secret}`,\n      };\n      this.#setHeaders(requestConfig, headers);\n\n      const isTaggedFormat = requestConfig.format === \"tagged\";\n\n      const queryArgs = requestConfig.arguments\n        ? isTaggedFormat\n          ? TaggedTypeFormat.encode(requestConfig.arguments)\n          : requestConfig.arguments\n        : undefined;\n\n      const requestData = {\n        query: queryInterpolation,\n        arguments: queryArgs,\n      };\n\n      const client_timeout_ms =\n        requestConfig.query_timeout_ms +\n        this.#clientConfiguration.client_timeout_buffer_ms;\n\n      const response = await this.#httpClient.request({\n        client_timeout_ms,\n        data: requestData,\n        headers,\n        method: \"POST\",\n      });\n\n      let parsedResponse;\n      try {\n        parsedResponse = {\n          ...response,\n          body: isTaggedFormat\n            ? TaggedTypeFormat.decode(response.body, {\n                long_type: requestConfig.long_type,\n              })\n            : JSON.parse(response.body),\n        };\n        if (parsedResponse.body.query_tags) {\n          const tags_array = (parsedResponse.body.query_tags as string)\n            .split(\",\")\n            .map((tag) => tag.split(\"=\"));\n          parsedResponse.body.query_tags = Object.fromEntries(tags_array);\n        }\n      } catch (error: unknown) {\n        throw new ProtocolError({\n          message: `Error parsing response as JSON: ${error}`,\n          httpStatus: response.status,\n        });\n      }\n\n      // Response is not from Fauna\n      if (!isQuerySuccess(parsedResponse.body)) {\n        throw this.#getError(parsedResponse);\n      }\n\n      const txn_ts = parsedResponse.body.txn_ts;\n      if (\n        (this.#lastTxnTs === undefined && txn_ts !== undefined) ||\n        (txn_ts !== undefined &&\n          this.#lastTxnTs !== undefined &&\n          this.#lastTxnTs < txn_ts)\n      ) {\n        this.#lastTxnTs = txn_ts;\n      }\n\n      return parsedResponse.body as QuerySuccess<T>;\n    } catch (e: any) {\n      throw this.#getError(e);\n    }\n  }\n\n  #setHeaders(\n    fromObject: QueryOptions,\n    headerObject: Record<string, string | number>\n  ): void {\n    for (const entry of Object.entries(fromObject)) {\n      if (\n        [\n          \"format\",\n          \"query_timeout_ms\",\n          \"linearized\",\n          \"max_contention_retries\",\n          \"traceparent\",\n          \"typecheck\",\n          \"query_tags\",\n        ].includes(entry[0])\n      ) {\n        let headerValue: string;\n        let headerKey = `x-${entry[0].replaceAll(\"_\", \"-\")}`;\n        if (\"query_tags\" === entry[0]) {\n          headerValue = Object.entries(entry[1])\n            .map((tag) => tag.join(\"=\"))\n            .join(\",\");\n        } else {\n          if (typeof entry[1] === \"string\") {\n            headerValue = entry[1];\n          } else {\n            headerValue = String(entry[1]);\n          }\n        }\n        if (\"traceparent\" === entry[0]) {\n          headerKey = entry[0];\n        }\n        headerObject[headerKey] = headerValue;\n      }\n    }\n    if (\n      headerObject[\"x-last-txn-ts\"] === undefined &&\n      this.#lastTxnTs !== undefined\n    ) {\n      headerObject[\"x-last-txn-ts\"] = this.#lastTxnTs;\n    }\n\n    headerObject[\"x-driver-env\"] = Client.#driverEnvHeader;\n  }\n\n  #validateConfiguration() {\n    const config = this.#clientConfiguration;\n\n    const required_options: (keyof RequiredClientConfig)[] = [\n      \"client_timeout_buffer_ms\",\n      \"endpoint\",\n      \"format\",\n      \"http2_session_idle_ms\",\n      \"long_type\",\n      \"query_timeout_ms\",\n      \"fetch_keepalive\",\n      \"http2_max_streams\",\n    ];\n    required_options.forEach((option) => {\n      if (config[option] === undefined) {\n        throw new TypeError(\n          `ClientConfiguration option '${option}' must be defined.`\n        );\n      }\n    });\n\n    if (config.http2_max_streams <= 0) {\n      throw new RangeError(`'http2_max_streams' must be greater than zero.`);\n    }\n\n    if (config.client_timeout_buffer_ms <= 0) {\n      throw new RangeError(\n        `'client_timeout_buffer_ms' must be greater than zero.`\n      );\n    }\n\n    if (config.query_timeout_ms <= 0) {\n      throw new RangeError(`'query_timeout_ms' must be greater than zero.`);\n    }\n  }\n}\n\n// Private types and constants for internal logic.\n\nconst QUERY_CHECK_FAILURE_CODES = [\n  \"invalid_function_definition\",\n  \"invalid_identifier\",\n  \"invalid_query\",\n  \"invalid_syntax\",\n  \"invalid_type\",\n];\n", "import { APIGatewayProxyHandler } from 'aws-lambda';\nimport { Client, fql } from 'fauna';\n\nconst client = new Client({ secret: process.env.FAUNA_SECRET });\n\nexport const handler: APIGatewayProxyHandler = async (event) => {\n  try {\n    if (!event.pathParameters || !event.pathParameters.id) {\n      return {\n        statusCode: 400,\n        body: JSON.stringify({ error: 'ID must be provided.' }),\n      };\n    }\n\n    if (!event.body) {\n      return {\n        statusCode: 400,\n        body: JSON.stringify({ error: 'Invalid request body' }),\n      };\n    }\n\n    console.log('Path Parameters:', event.pathParameters);\n\n    const id = event.pathParameters.id;\n    const data = JSON.parse(event.body);\n\n    const response = await client.query(fql`\n    let itemToUpdate = Inventory.byId(${id});\n    itemToUpdate.update(${data})`\n  );\n\n    return {\n      statusCode: 200,\n      body: JSON.stringify(response),\n    };\n  } catch (error) {\n    return {\n      statusCode: 400,\n      body: JSON.stringify(error),\n    };\n  }\n};\n"],
  "mappings": "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",
  "names": ["__export", "Client", "fql", "module", "__toCommonJS", "_url", "signal", "__privateAdd", "__privateSet", "_a", "__privateMethod", "__privateGet", "client", "_generator", "Query", "navigator", "os"]
}
